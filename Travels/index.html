<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:v="urn:schemas-microsoft-com:vml">

<html>

  <head>

    <meta HTTP-EQUIV="Content-Type" CONTENT="text/html;charset=utf-8">

    <link type="text/css" rel="stylesheet" href="../main.css">

    <title> Steve Block : Travels </title>

    <script src="../main.js" type="text/javascript"></script>
    <script src="../Scripts/utils.js" type="text/javascript"></script>
    <script src="../Scripts/googleMaps.js" type="text/javascript"></script>

    <!-- this key is good for web.mit.edu/snw/www -->
    <script src="http://www.google.com/jsapi?key=ABQIAAAA_Xocq18Wh01DYjhDo3vEbxQww4B36n1MWJcqWT3ccjTYRRSVWRQWr3G6zUsMyWbZ8HtxYPIlTK9GSg" type="text/javascript"></script>

    <script type="text/javascript">
      LoadGoogleMaps();
      var pathToScripts = '../'; // To locate map icons
      window.onresize = ResizeMap;
      // This is a map containing all of the ClickHandler methods referenced in the XML file
      googleMapsClickHandler[ 'ShowPopUp' ] = function( marker, point, args ){ 
        var tokens = args.split( ',' );
        PopUp( marker, StripQuotes(tokens[0]), StripQuotes(tokens[1]), tokens[2] );
      }
      function OnUnload() {
        GUnload();
      }
      function OnLoad() {
        // Onload gets called after the document body has been loaded
        ResizeMap();
        CreateMap( 'map' );  // From Scripts/googleMaps.js
        LoadMapData( 'travels.xml' );
        ResetMap();
      }
      function ResetMap() {
        map.setCenter( new GLatLng( 42.0, -70.0 ), 3, G_HYBRID_MAP );
      }
      function ResizeMap() {
        var windowSize = GetWindowSize();
        var mapHeight = windowSize.height - 190;
        document.getElementById("map").style.height = mapHeight + 'px';
      }
      function PopUp( marker, link, imageFile, portrait ) {
        // alert( marker + ' ' + imageFile + ' ' + link + ' ' + portrait );
        var theClass;
        if( portrait ) { theClass = "popUpPortrait"; } else { theClass = "popUpLandscape"; }
        marker.openInfoWindowHtml( '<a href="' + link + '"><img src="' + imageFile + '" class="' + theClass + '" /></a>' );
      }
      window.onload = OnLoad;
      // window.onunload = OnUnload;
    </script>

    <style type="text/css">
      img.popUpLandscape {
        height: 180px;
        width: 240px;
        display: block;
        margin: auto;
      }
      img.popUpPortrait {
        height: 240px;
        width: 180px;
        display: block;
        margin: auto;
      }
    </style>

  </head>

  <body>

    <script type="text/javascript"> WriteHeader( [1] ); </script>

    <div style="margin: 10px;">
      Mouseover markers for locations, or click to see photos.
    </div>

    <div style="position: relative; min-width: 400px; border: 1px solid white; margin: 0px 20px;">
      <div id="map" style="min-height: 400px; height: 400px;"> </div>
      <button style="position: absolute; right: 20px; bottom: 20px;" onclick="ResetMap()">Reset map</button>
    </div>

  </body>

</html>
